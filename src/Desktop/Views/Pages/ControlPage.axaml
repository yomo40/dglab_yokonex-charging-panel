<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="ChargingPanel.Desktop.Views.Pages.ControlPage">
    
    <ScrollViewer>
        <StackPanel Spacing="20" Margin="0,0,0,20">
            <!-- ç›®æ ‡è®¾å¤‡é€‰æ‹© -->
            <Border CornerRadius="16" Padding="0" BoxShadow="0 4 16 0 #10000000">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Offset="0" Color="#313244" />
                        <GradientStop Offset="1" Color="#353550" />
                    </LinearGradientBrush>
                </Border.Background>
                <StackPanel>
                    <Border CornerRadius="16,16,0,0" Padding="22,18">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                <GradientStop Offset="0" Color="#1E1E2E" />
                                <GradientStop Offset="1" Color="#262640" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <Border Background="#8b5cf620" CornerRadius="10" Padding="10">
                                <TextBlock Text="ðŸŽ¯" FontSize="18" VerticalAlignment="Center" />
                            </Border>
                            <TextBlock Text="ç›®æ ‡è®¾å¤‡" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>
                    <Grid ColumnDefinitions="*,Auto,Auto" Margin="20">
                        <ComboBox x:Name="DeviceSelector" 
                                  HorizontalAlignment="Stretch" 
                                  SelectionChanged="OnDeviceSelected">
                            <ComboBoxItem Content="-- é€‰æ‹©è®¾å¤‡ --" />
                        </ComboBox>
                        
                        <!-- è®¾å¤‡ç±»åž‹æ ‡è¯† -->
                        <Border x:Name="DeviceTypeBadge" Grid.Column="1" 
                                Background="#45475A" CornerRadius="6" 
                                Padding="10,6" Margin="10,0"
                                IsVisible="False">
                            <TextBlock x:Name="DeviceTypeText" Text="DG-LAB" Foreground="#A6ADC8" FontSize="12" />
                        </Border>
                        
                        <Button Grid.Column="2" 
                                Content="ðŸ›‘ ç´§æ€¥åœæ­¢" 
                                Background="#EF4444" 
                                Foreground="White"
                                Padding="20,10"
                                Click="OnEmergencyStop" />
                    </Grid>
                </StackPanel>
            </Border>
            
            <!-- åŒé€šé“æŽ§åˆ¶é¢æ¿ -->
            <Grid ColumnDefinitions="*,*">
                <!-- é€šé“ A -->
                <Border Grid.Column="0" CornerRadius="16" Padding="0" Margin="0,0,10,0" BoxShadow="0 4 16 0 #188b5cf6">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                            <GradientStop Offset="0" Color="#313244" />
                            <GradientStop Offset="1" Color="#353550" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <StackPanel>
                        <Border CornerRadius="16,16,0,0" Padding="22,18">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                    <GradientStop Offset="0" Color="#1E1E2E" />
                                    <GradientStop Offset="1" Color="#262640" />
                                </LinearGradientBrush>
                            </Border.Background>
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <Border Background="#8b5cf620" CornerRadius="10" Padding="10">
                                    <TextBlock Text="âš¡" FontSize="18" VerticalAlignment="Center" />
                                </Border>
                                <TextBlock Text="é€šé“ A æŽ§åˆ¶" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                            </StackPanel>
                        </Border>
                        <StackPanel Margin="20" HorizontalAlignment="Center">
                            <!-- å¼ºåº¦æ˜¾ç¤ºåœˆ -->
                            <Border Width="120" Height="120" CornerRadius="60" 
                                    Background="#1E1E2E" BorderBrush="#8b5cf6" BorderThickness="4"
                                    HorizontalAlignment="Center">
                                <TextBlock x:Name="StrengthADisplay" Text="0" 
                                           FontSize="42" FontWeight="Bold" Foreground="#8b5cf6"
                                           HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                            
                            <!-- æ»‘å— -->
                            <TextBlock Text="å¼ºåº¦ (0-200)" Foreground="#A6ADC8" FontSize="12" 
                                       HorizontalAlignment="Center" Margin="0,20,0,5" />
                            <Slider x:Name="SliderA" Minimum="0" Maximum="200" Value="0" 
                                    Width="200" ValueChanged="OnSliderAChanged" />
                            <TextBlock x:Name="SliderAValue" Text="0" Foreground="#A6ADC8" FontSize="12" 
                                       HorizontalAlignment="Center" Margin="0,5,0,0" />
                            
                            <!-- åº”ç”¨æŒ‰é’® -->
                            <Button x:Name="ApplyA" Content="âœ“ åº”ç”¨å¼ºåº¦" 
                                    Background="#10B981" Foreground="White"
                                    HorizontalAlignment="Center"
                                    Padding="20,8" Margin="0,10,0,0"
                                    Click="OnApplyStrengthA" />
                            
                            <!-- å¿«æ·æŒ‰é’® -->
                            <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center" Margin="0,15,0,0">
                                <Button Content="-10" Tag="A,-10" Click="OnQuickControl" 
                                        MinWidth="48" Padding="8,6" CornerRadius="6"
                                        Background="#45475A" Foreground="White" FontWeight="SemiBold" />
                                <Button Content="-1" Tag="A,-1" Click="OnQuickControl" 
                                        MinWidth="40" Padding="8,6" CornerRadius="6"
                                        Background="#45475A" Foreground="White" FontWeight="SemiBold" />
                                <Button Content="0" Tag="A,0" Click="OnQuickControl" 
                                        MinWidth="40" Padding="8,6" CornerRadius="6"
                                        Background="#F59E0B" Foreground="White" FontWeight="SemiBold" />
                                <Button Content="+1" Tag="A,1" Click="OnQuickControl" 
                                        MinWidth="40" Padding="8,6" CornerRadius="6"
                                        Background="#45475A" Foreground="White" FontWeight="SemiBold" />
                                <Button Content="+10" Tag="A,10" Click="OnQuickControl" 
                                        MinWidth="48" Padding="8,6" CornerRadius="6"
                                        Background="#45475A" Foreground="White" FontWeight="SemiBold" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- é€šé“ B -->
                <Border Grid.Column="1" CornerRadius="16" Padding="0" Margin="10,0,0,0" BoxShadow="0 4 16 0 #1806b6d4">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                            <GradientStop Offset="0" Color="#313244" />
                            <GradientStop Offset="1" Color="#353550" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <StackPanel>
                        <Border CornerRadius="16,16,0,0" Padding="22,18">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                    <GradientStop Offset="0" Color="#1E1E2E" />
                                    <GradientStop Offset="1" Color="#262640" />
                                </LinearGradientBrush>
                            </Border.Background>
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <Border Background="#06b6d420" CornerRadius="10" Padding="10">
                                    <TextBlock Text="âš¡" FontSize="18" VerticalAlignment="Center" />
                                </Border>
                                <TextBlock Text="é€šé“ B æŽ§åˆ¶" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                            </StackPanel>
                        </Border>
                        <StackPanel Margin="20" HorizontalAlignment="Center">
                            <!-- å¼ºåº¦æ˜¾ç¤ºåœˆ -->
                            <Border Width="120" Height="120" CornerRadius="60" 
                                    Background="#1E1E2E" BorderBrush="#06b6d4" BorderThickness="4"
                                    HorizontalAlignment="Center">
                                <TextBlock x:Name="StrengthBDisplay" Text="0" 
                                           FontSize="42" FontWeight="Bold" Foreground="#06b6d4"
                                           HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                            
                            <!-- æ»‘å— -->
                            <TextBlock Text="å¼ºåº¦ (0-200)" Foreground="#A6ADC8" FontSize="12" 
                                       HorizontalAlignment="Center" Margin="0,20,0,5" />
                            <Slider x:Name="SliderB" Minimum="0" Maximum="200" Value="0" 
                                    Width="200" ValueChanged="OnSliderBChanged" />
                            <TextBlock x:Name="SliderBValue" Text="0" Foreground="#A6ADC8" FontSize="12" 
                                       HorizontalAlignment="Center" Margin="0,5,0,0" />
                            
                            <!-- åº”ç”¨æŒ‰é’® -->
                            <Button x:Name="ApplyB" Content="âœ“ åº”ç”¨å¼ºåº¦" 
                                    Background="#10B981" Foreground="White"
                                    HorizontalAlignment="Center"
                                    Padding="20,8" Margin="0,10,0,0"
                                    Click="OnApplyStrengthB" />
                            
                            <!-- å¿«æ·æŒ‰é’® -->
                            <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center" Margin="0,15,0,0">
                                <Button Content="-10" Tag="B,-10" Click="OnQuickControl" 
                                        MinWidth="48" Padding="8,6" CornerRadius="6"
                                        Background="#45475A" Foreground="White" FontWeight="SemiBold" />
                                <Button Content="-1" Tag="B,-1" Click="OnQuickControl" 
                                        MinWidth="40" Padding="8,6" CornerRadius="6"
                                        Background="#45475A" Foreground="White" FontWeight="SemiBold" />
                                <Button Content="0" Tag="B,0" Click="OnQuickControl" 
                                        MinWidth="40" Padding="8,6" CornerRadius="6"
                                        Background="#F59E0B" Foreground="White" FontWeight="SemiBold" />
                                <Button Content="+1" Tag="B,1" Click="OnQuickControl" 
                                        MinWidth="40" Padding="8,6" CornerRadius="6"
                                        Background="#45475A" Foreground="White" FontWeight="SemiBold" />
                                <Button Content="+10" Tag="B,10" Click="OnQuickControl" 
                                        MinWidth="48" Padding="8,6" CornerRadius="6"
                                        Background="#45475A" Foreground="White" FontWeight="SemiBold" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- å½¹æ¬¡å…ƒè®¾å¤‡ä¸“ç”¨æŽ§åˆ¶ -->
            <Border x:Name="YokonexControlPanel" CornerRadius="16" Padding="0" IsVisible="False" BoxShadow="0 4 16 0 #18F59E0B">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Offset="0" Color="#313244" />
                        <GradientStop Offset="1" Color="#353550" />
                    </LinearGradientBrush>
                </Border.Background>
                <StackPanel>
                    <Border CornerRadius="16,16,0,0" Padding="22,18">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                <GradientStop Offset="0" Color="#1E1E2E" />
                                <GradientStop Offset="1" Color="#262640" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <Border Background="#F59E0B20" CornerRadius="10" Padding="10">
                                <TextBlock Text="ðŸ“±" FontSize="18" VerticalAlignment="Center" />
                            </Border>
                            <TextBlock Text="å½¹æ¬¡å…ƒè®¾å¤‡æŽ§åˆ¶" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>
                    <!-- é€šé“è¿žæŽ¥çŠ¶æ€ -->
                    <Border x:Name="YokonexChannelStatus" Background="#1E1E2E" CornerRadius="8" Padding="12" Margin="20,10,20,0">
                        <Grid ColumnDefinitions="Auto,*,Auto,*,Auto,*">
                            <TextBlock Text="ðŸ”Œ é€šé“çŠ¶æ€:" Foreground="#A6ADC8" FontSize="12" VerticalAlignment="Center" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="4" Margin="8,0,16,0">
                                <Ellipse x:Name="ChannelAIndicator" Width="10" Height="10" Fill="#6B7280" VerticalAlignment="Center" />
                                <TextBlock x:Name="ChannelAStatusText" Text="A: æœªçŸ¥" Foreground="#A6ADC8" FontSize="12" VerticalAlignment="Center" />
                            </StackPanel>
                            <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="4" Margin="0,0,16,0">
                                <Ellipse x:Name="ChannelBIndicator" Width="10" Height="10" Fill="#6B7280" VerticalAlignment="Center" />
                                <TextBlock x:Name="ChannelBStatusText" Text="B: æœªçŸ¥" Foreground="#A6ADC8" FontSize="12" VerticalAlignment="Center" />
                            </StackPanel>
                            <TextBlock Grid.Column="3" Text="ðŸš¶ è®¡æ­¥:" Foreground="#A6ADC8" FontSize="12" VerticalAlignment="Center" Margin="8,0,4,0" />
                            <TextBlock Grid.Column="4" x:Name="StepCountText" Text="0" Foreground="#10B981" FontSize="12" FontWeight="Bold" VerticalAlignment="Center" />
                            <TextBlock Grid.Column="5" x:Name="AngleText" Text="ðŸ“ X:0Â° Y:0Â° Z:0Â°" Foreground="#A6ADC8" FontSize="12" VerticalAlignment="Center" Margin="16,0,0,0" />
                        </Grid>
                    </Border>
                    
                    <Grid ColumnDefinitions="*,*,*" Margin="20">
                        <!-- ç”µå‡»æŽ§åˆ¶ -->
                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="ðŸ”Œ ç”µå‡»å¼ºåº¦" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Center" />
                            <Slider x:Name="YokonexEstimStrength" Minimum="0" Maximum="100" Value="0" Margin="0,10,0,5" 
                                    ValueChanged="OnYokonexEstimSliderChanged" />
                            <TextBlock x:Name="YokonexEstimValue" Text="0" Foreground="#A6ADC8" HorizontalAlignment="Center" />
                            <ComboBox x:Name="YokonexEstimMode" SelectedIndex="0" HorizontalAlignment="Stretch" Margin="0,10,0,0">
                                <ComboBoxItem Content="æ™®é€šæ¨¡å¼" Tag="normal" />
                                <ComboBoxItem Content="è„‰å†²æ¨¡å¼" Tag="pulse" />
                                <ComboBoxItem Content="æ¸å˜æ¨¡å¼" Tag="gradient" />
                                <ComboBoxItem Content="éšæœºæ¨¡å¼" Tag="random" />
                            </ComboBox>
                            <Button Content="åº”ç”¨" Background="#06b6d4" Foreground="White" 
                                    HorizontalAlignment="Stretch" Margin="0,10,0,0"
                                    Click="OnApplyYokonexEstim" />
                        </StackPanel>
                        
                        <!-- éœ‡åŠ¨æŽ§åˆ¶ -->
                        <StackPanel Grid.Column="1" Margin="10,0,10,0">
                            <TextBlock Text="ðŸ’— éœ‡åŠ¨å¼ºåº¦" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Center" />
                            <Slider x:Name="YokonexVibrateStrength" Minimum="0" Maximum="100" Value="0" Margin="0,10,0,5"
                                    ValueChanged="OnYokonexVibrateSliderChanged" />
                            <TextBlock x:Name="YokonexVibrateValue" Text="0" Foreground="#A6ADC8" HorizontalAlignment="Center" />
                            <ComboBox x:Name="YokonexVibrateMode" SelectedIndex="0" HorizontalAlignment="Stretch" Margin="0,10,0,0">
                                <ComboBoxItem Content="æŒç»­éœ‡åŠ¨" Tag="continuous" />
                                <ComboBoxItem Content="è„‰å†²éœ‡åŠ¨" Tag="pulse" />
                                <ComboBoxItem Content="æ³¢æµªéœ‡åŠ¨" Tag="wave" />
                                <ComboBoxItem Content="å¿ƒè·³æ¨¡å¼" Tag="heartbeat" />
                            </ComboBox>
                            <Button Content="åº”ç”¨" Background="#EC4899" Foreground="White" 
                                    HorizontalAlignment="Stretch" Margin="0,10,0,0"
                                    Click="OnApplyYokonexVibrate" />
                        </StackPanel>
                        
                        <!-- çŒè‚ /é£žæœºæ¯æŽ§åˆ¶ -->
                        <StackPanel Grid.Column="2" Margin="10,0,0,0">
                            <TextBlock Text="ðŸ’‰ å…¶ä»–è®¾å¤‡" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Center" />
                            <Slider x:Name="YokonexOtherStrength" Minimum="0" Maximum="100" Value="0" Margin="0,10,0,5"
                                    ValueChanged="OnYokonexOtherSliderChanged" />
                            <TextBlock x:Name="YokonexOtherValue" Text="0" Foreground="#A6ADC8" HorizontalAlignment="Center" />
                            <ComboBox x:Name="YokonexOtherMode" SelectedIndex="0" HorizontalAlignment="Stretch" Margin="0,10,0,0">
                                <ComboBoxItem Content="æ³¨å…¥æ¨¡å¼" Tag="inject" />
                                <ComboBoxItem Content="æŠ½å¸æ¨¡å¼" Tag="suction" />
                                <ComboBoxItem Content="å¾ªçŽ¯æ¨¡å¼" Tag="cycle" />
                                <ComboBoxItem Content="è‡ªå®šä¹‰" Tag="custom" />
                            </ComboBox>
                            <Button Content="åº”ç”¨" Background="#F59E0B" Foreground="White" 
                                    HorizontalAlignment="Stretch" Margin="0,10,0,0"
                                    Click="OnApplyYokonexOther" />
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
            
            <!-- éƒŠç‹¼ä¸“ç”¨æŽ§åˆ¶ (DG-LAB é«˜çº§è®¾ç½® + æ³¢å½¢é¢„è®¾åˆå¹¶) -->
            <Border x:Name="DGLabControlPanel" CornerRadius="16" Padding="0" IsVisible="False" BoxShadow="0 4 16 0 #188b5cf6">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Offset="0" Color="#313244" />
                        <GradientStop Offset="1" Color="#353550" />
                    </LinearGradientBrush>
                </Border.Background>
                <StackPanel>
                    <Border CornerRadius="16,16,0,0" Padding="22,18">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                <GradientStop Offset="0" Color="#1E1E2E" />
                                <GradientStop Offset="1" Color="#262640" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <Grid ColumnDefinitions="*,Auto">
                            <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12">
                                <Border Background="#8b5cf620" CornerRadius="10" Padding="10">
                                    <TextBlock Text="âš¡" FontSize="18" VerticalAlignment="Center" />
                                </Border>
                                <TextBlock Text="éƒŠç‹¼ä¸“ç”¨æŽ§åˆ¶" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                            </StackPanel>
                            <Border Grid.Column="1" CornerRadius="8" Padding="10,6">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#8b5cf6" />
                                        <GradientStop Offset="1" Color="#a855f7" />
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="DG-LAB" Foreground="White" FontSize="11" FontWeight="SemiBold" />
                            </Border>
                        </Grid>
                    </Border>
                    <StackPanel Margin="20" Spacing="20">
                        
                        <!-- æŒ‰é’®è®¾å¤‡ä¸“ç”¨æŽ§åˆ¶ (ä»…æŒ‰é’®ç‰ˆæ˜¾ç¤º) -->
                        <Border x:Name="SensorControlPanel" IsVisible="False" Background="#1E1E2E" CornerRadius="8" Padding="16">
                            <StackPanel Spacing="12">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="ðŸ”˜" FontSize="16" VerticalAlignment="Center" />
                                    <TextBlock Text="æŒ‰é’®è®¾å¤‡æŽ§åˆ¶" Foreground="#10B981" FontWeight="SemiBold" FontSize="14" VerticalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Text="æŒ‰é’®è®¾å¤‡é€šè¿‡å¤–éƒ¨ç”µåŽ‹æ£€æµ‹è§¦å‘äº‹ä»¶ï¼Œè¯·åœ¨éƒŠç‹¼APPä¸­é…ç½®è§¦å‘è§„åˆ™ã€‚" 
                                           Foreground="#A6ADC8" FontSize="12" TextWrapping="Wrap" />
                                <Grid ColumnDefinitions="*,*">
                                    <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                        <TextBlock Text="ç›®æ ‡ç”µåŽ‹èŒƒå›´ (V)" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,4" />
                                        <Grid ColumnDefinitions="*,Auto,*">
                                            <TextBox x:Name="SensorVoltageMin" Text="0.49" Background="#313244" Foreground="White" 
                                                     BorderBrush="#45475A" CornerRadius="4" Padding="8,6" FontSize="12" />
                                            <TextBlock Grid.Column="1" Text="~" Foreground="#A6ADC8" Margin="8,0" VerticalAlignment="Center" />
                                            <TextBox Grid.Column="2" x:Name="SensorVoltageMax" Text="0.84" Background="#313244" Foreground="White" 
                                                     BorderBrush="#45475A" CornerRadius="4" Padding="8,6" FontSize="12" />
                                        </Grid>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                        <TextBlock Text="è§¦å‘å¼ºåº¦å˜åŒ–" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,4" />
                                        <Grid ColumnDefinitions="*,Auto,*">
                                            <TextBox x:Name="SensorStrengthMin" Text="1" Background="#313244" Foreground="White" 
                                                     BorderBrush="#45475A" CornerRadius="4" Padding="8,6" FontSize="12" />
                                            <TextBlock Grid.Column="1" Text="~" Foreground="#A6ADC8" Margin="8,0" VerticalAlignment="Center" />
                                            <TextBox Grid.Column="2" x:Name="SensorStrengthMax" Text="40" Background="#313244" Foreground="White" 
                                                     BorderBrush="#45475A" CornerRadius="4" Padding="8,6" FontSize="12" />
                                        </Grid>
                                    </StackPanel>
                                </Grid>
                                <Border Background="#F59E0B10" CornerRadius="6" Padding="10" Margin="0,4,0,0">
                                    <TextBlock Text="ðŸ’¡ æŒ‰é’®è®¾å¤‡çš„è§¦å‘è§„åˆ™éœ€è¦åœ¨éƒŠç‹¼APPä¸­é…ç½®ã€‚æœ¬é¢æ¿ä»…ç”¨äºŽç›‘æŽ§å’Œæµ‹è¯•ã€‚" 
                                               Foreground="#F59E0B" FontSize="11" TextWrapping="Wrap" />
                                </Border>
                            </StackPanel>
                        </Border>
                        
                        <!-- å¼ºåº¦ä¸Šé™è®¾ç½® -->
                        <StackPanel>
                            <TextBlock Text="ðŸ”’ å¼ºåº¦ä¸Šé™" Foreground="White" FontWeight="SemiBold" Margin="0,0,0,12" />
                            <Grid ColumnDefinitions="*,*,Auto">
                                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                    <TextBlock Text="A é€šé“ä¸Šé™" Foreground="#A6ADC8" FontSize="12" />
                                    <TextBox x:Name="LimitA" Text="200" Margin="0,5,0,0" />
                                </StackPanel>
                                <StackPanel Grid.Column="1" Margin="10,0,10,0">
                                    <TextBlock Text="B é€šé“ä¸Šé™" Foreground="#A6ADC8" FontSize="12" />
                                    <TextBox x:Name="LimitB" Text="200" Margin="0,5,0,0" />
                                </StackPanel>
                                <Button Grid.Column="2" Content="âš™ï¸ è®¾ç½®" 
                                        Background="#8b5cf6" Foreground="White"
                                        VerticalAlignment="Bottom" Padding="20,10"
                                        CornerRadius="6"
                                        Click="OnSetLimits" />
                            </Grid>
                        </StackPanel>
                        
                        <!-- æ³¢å½¢é˜Ÿåˆ—ç®¡ç† -->
                        <StackPanel>
                            <TextBlock Text="ðŸ—‘ï¸ æ³¢å½¢é˜Ÿåˆ—" Foreground="White" FontWeight="SemiBold" Margin="0,0,0,12" />
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <Button Content="æ¸…ç©º A é€šé“" Background="#F59E0B" Foreground="White" 
                                        Padding="16,8" CornerRadius="6" Click="OnClearQueueA" />
                                <Button Content="æ¸…ç©º B é€šé“" Background="#F59E0B" Foreground="White" 
                                        Padding="16,8" CornerRadius="6" Click="OnClearQueueB" />
                                <Button Content="å…¨éƒ¨æ¸…ç©º" Background="#EF4444" Foreground="White" 
                                        Padding="16,8" CornerRadius="6" Click="OnClearQueueAll" />
                            </StackPanel>
                        </StackPanel>
                        
                        <!-- æ³¢å½¢é¢„è®¾ + é˜Ÿåˆ—ç¼–è¾‘å™¨
                             æ³¨æ„ï¼š
                             - æ³¢å½¢ = å•ä¸ªæ³¢å½¢çš„å›¾å½¢åŒ–ç¼–è¾‘ï¼ˆHEX æ•°æ®ï¼‰
                             - é¢„è®¾ = å¤šä¸ªæ³¢å½¢çš„æ’­æ”¾åˆ—è¡¨ï¼ˆé¡ºåºæ’­æ”¾ï¼‰
                             TODO: æœªæ¥ç‰ˆæœ¬æ·»åŠ å›¾å½¢åŒ–æ³¢å½¢ç¼–è¾‘å™¨å’Œæ’­æ”¾åˆ—è¡¨åŠŸèƒ½ 
                        -->
                        <StackPanel>
                            <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,12">
                                <TextBlock Text="ðŸŒŠ æ³¢å½¢é¢„è®¾" Foreground="White" FontWeight="SemiBold" VerticalAlignment="Center" />
                                <Button Grid.Column="1" Content="âž• æ–°å»ºé¢„è®¾" 
                                        Background="#10B981" Foreground="White" 
                                        Padding="12,6" CornerRadius="6" FontSize="12"
                                        Click="OnNewWaveformPresetClick" />
                            </Grid>
                            
                            <!-- é¢„è®¾åˆ—è¡¨ -->
                            <Border Background="#1E1E2E" CornerRadius="8" Padding="12" Margin="0,0,0,16">
                                <WrapPanel x:Name="WaveformPresetsPanel" Orientation="Horizontal">
                                    <Button Content="ðŸ’¨ å‘¼å¸ç¯" Tag="breathing" Click="OnWaveformClick" 
                                            Background="#313244" Foreground="White" BorderBrush="#45475A" BorderThickness="1"
                                            Margin="0,0,10,10" Padding="15,10" CornerRadius="6" />
                                    <Button Content="â¤ï¸ å¿ƒè·³" Tag="heartbeat" Click="OnWaveformClick" 
                                            Background="#313244" Foreground="White" BorderBrush="#45475A" BorderThickness="1"
                                            Margin="0,0,10,10" Padding="15,10" CornerRadius="6" />
                                    <Button Content="ðŸ“³ éœ‡åŠ¨" Tag="vibration" Click="OnWaveformClick" 
                                            Background="#313244" Foreground="White" BorderBrush="#45475A" BorderThickness="1"
                                            Margin="0,0,10,10" Padding="15,10" CornerRadius="6" />
                                    <Button Content="ðŸ“ˆ çˆ¬å‡" Tag="climb" Click="OnWaveformClick" 
                                            Background="#313244" Foreground="White" BorderBrush="#45475A" BorderThickness="1"
                                            Margin="0,0,10,10" Padding="15,10" CornerRadius="6" />
                                    <Button Content="ðŸŽ² éšæœº" Tag="random" Click="OnWaveformClick" 
                                            Background="#313244" Foreground="White" BorderBrush="#45475A" BorderThickness="1"
                                            Margin="0,0,10,10" Padding="15,10" CornerRadius="6" />
                                    <Button Content="âš¡ è„‰å†²" Tag="pulse" Click="OnWaveformClick" 
                                            Background="#313244" Foreground="White" BorderBrush="#45475A" BorderThickness="1"
                                            Margin="0,0,10,10" Padding="15,10" CornerRadius="6" />
                                    <Button Content="ðŸŒŠ æ³¢æµª" Tag="wave" Click="OnWaveformClick" 
                                            Background="#313244" Foreground="White" BorderBrush="#45475A" BorderThickness="1"
                                            Margin="0,0,10,10" Padding="15,10" CornerRadius="6" />
                                    <Button Content="ðŸ”¥ ç«ç„°" Tag="flame" Click="OnWaveformClick" 
                                            Background="#313244" Foreground="White" BorderBrush="#45475A" BorderThickness="1"
                                            Margin="0,0,10,10" Padding="15,10" CornerRadius="6" />
                                </WrapPanel>
                            </Border>
                            
                            <!-- è‡ªå®šä¹‰é¢„è®¾ç¼–è¾‘åŒº (é»˜è®¤éšè—) -->
                            <Border x:Name="WaveformEditorPanel" IsVisible="False" Background="#1E1E2E" CornerRadius="8" Padding="16" Margin="0,0,0,16"
                                    BorderBrush="#8b5cf6" BorderThickness="1">
                                <StackPanel Spacing="16">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <TextBlock Text="ðŸ“ ç¼–è¾‘æ³¢å½¢é¢„è®¾" Foreground="#8b5cf6" FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                                        <Button Grid.Column="1" Content="âœ•" 
                                                Background="Transparent" Foreground="#A6ADC8"
                                                Padding="8,4" CornerRadius="4"
                                                Click="OnCloseWaveformEditorClick" />
                                    </Grid>
                                    
                                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto">
                                        <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,8,12">
                                            <TextBlock Text="é¢„è®¾åç§°" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                            <TextBox x:Name="WaveformPresetName" Watermark="æˆ‘çš„æ³¢å½¢é¢„è®¾"
                                                     Background="#313244" Foreground="White"
                                                     BorderBrush="#45475A" CornerRadius="6" Padding="12,8" />
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Grid.Row="0" Margin="8,0,0,12">
                                            <TextBlock Text="å›¾æ ‡ (Emoji)" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                            <TextBox x:Name="WaveformPresetIcon" Text="ðŸŒŠ" MaxLength="4"
                                                     Background="#313244" Foreground="White"
                                                     BorderBrush="#45475A" CornerRadius="6" Padding="12,8" />
                                        </StackPanel>
                                        <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,8,0">
                                            <TextBlock Text="ç›®æ ‡é€šé“" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                            <ComboBox x:Name="WaveformPresetChannel" SelectedIndex="2"
                                                      Background="#313244" Foreground="White" HorizontalAlignment="Stretch">
                                                <ComboBoxItem Content="A é€šé“" Tag="A" />
                                                <ComboBoxItem Content="B é€šé“" Tag="B" />
                                                <ComboBoxItem Content="åŒé€šé“ (A+B)" Tag="AB" />
                                            </ComboBox>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Grid.Row="1" Margin="8,0,0,0">
                                            <TextBlock Text="æŒç»­æ—¶é—´ (ms)" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                            <TextBox x:Name="WaveformPresetDuration" Text="1000"
                                                     Background="#313244" Foreground="White"
                                                     BorderBrush="#45475A" CornerRadius="6" Padding="12,8" />
                                        </StackPanel>
                                    </Grid>
                                    
                                    <StackPanel>
                                        <TextBlock Text="æ³¢å½¢æ•°æ® (HEX æ ¼å¼ï¼Œæ¯2ä½ä»£è¡¨ä¸€ä¸ªé‡‡æ ·ç‚¹çš„å¼ºåº¦ 00-0F)" 
                                                   Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                        <TextBox x:Name="WaveformPresetData" 
                                                 Watermark="ä¾‹å¦‚ï¼š0A0A0A0A0A0A0A0A"
                                                 Background="#313244" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="6" Padding="12,8" />
                                    </StackPanel>
                                    
                                    <StackPanel>
                                        <TextBlock Text="å¼ºåº¦ç™¾åˆ†æ¯”" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                        <Grid ColumnDefinitions="*,Auto">
                                            <Slider x:Name="WaveformPresetIntensity" Minimum="0" Maximum="100" Value="50" 
                                                    Margin="0,0,12,0" />
                                            <TextBlock Grid.Column="1" x:Name="WaveformPresetIntensityText" Text="50%" 
                                                       Foreground="White" FontWeight="Bold" VerticalAlignment="Center" Width="50" />
                                        </Grid>
                                    </StackPanel>
                                    
                                    <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Right">
                                        <Button Content="ðŸ—‘ï¸ åˆ é™¤" 
                                                x:Name="BtnDeleteWaveformPreset"
                                                Background="#EF4444" Foreground="White" 
                                                Padding="16,8" CornerRadius="6"
                                                IsVisible="False"
                                                Click="OnDeleteWaveformPresetClick" />
                                        <Button Content="ðŸ’¾ ä¿å­˜é¢„è®¾" 
                                                Background="#8b5cf6" Foreground="White" 
                                                Padding="16,8" CornerRadius="6"
                                                Click="OnSaveWaveformPresetClick" />
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                        
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
    
</UserControl>
