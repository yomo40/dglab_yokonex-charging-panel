<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="ChargingPanel.Desktop.Views.Pages.PluginsPage">
    
    <Grid ColumnDefinitions="300,*">
        <!-- å·¦ä¾§ï¼šè„šæœ¬åˆ—è¡¨ -->
        <Border Grid.Column="0" CornerRadius="16" Padding="0" Margin="0,0,16,0" BoxShadow="0 4 16 0 #10000000">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                    <GradientStop Offset="0" Color="#313244" />
                    <GradientStop Offset="1" Color="#353550" />
                </LinearGradientBrush>
            </Border.Background>
            <DockPanel>
                <Border DockPanel.Dock="Top" CornerRadius="16,16,0,0" Padding="22,18">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                            <GradientStop Offset="0" Color="#1E1E2E" />
                            <GradientStop Offset="1" Color="#262640" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,14">
                            <Border Background="#10B98120" CornerRadius="10" Padding="10">
                                <TextBlock Text="ðŸ“œ" FontSize="18" VerticalAlignment="Center" />
                            </Border>
                            <TextBlock Text="æ¸¸æˆé€‚é…è„šæœ¬" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Button Padding="14,8" CornerRadius="10" FontWeight="SemiBold"
                                    Click="OnNewScriptClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#10B981" />
                                        <GradientStop Offset="1" Color="#34d399" />
                                    </LinearGradientBrush>
                                </Button.Background>
                                <TextBlock Text="+ æ–°å»º" Foreground="White" />
                            </Button>
                            <Button Padding="14,8" CornerRadius="10" FontWeight="SemiBold"
                                    Click="OnImportScriptClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#6366F1" />
                                        <GradientStop Offset="1" Color="#818cf8" />
                                    </LinearGradientBrush>
                                </Button.Background>
                                <TextBlock Text="å¯¼å…¥" Foreground="White" />
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <ListBox x:Name="ScriptList" 
                         Background="Transparent"
                         Margin="12"
                         SelectionChanged="OnScriptSelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#3C3C3C" CornerRadius="6" Padding="12" Margin="0,4">
                                <Grid ColumnDefinitions="*,Auto">
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Name}" Foreground="White" FontWeight="SemiBold" FontSize="13" />
                                        <TextBlock Text="{Binding Game}" Foreground="#888" FontSize="11" Margin="0,4,0,0" />
                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                            <TextBlock Text="ç‰ˆæœ¬: " FontSize="11" Foreground="#666"/>
                                            <TextBlock Text="{Binding Version}" FontSize="11" Foreground="#3B82F6"/>
                                        </StackPanel>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Spacing="8">
                                        <ToggleSwitch IsChecked="{Binding Enabled}" 
                                                      OnContent="å¯ç”¨" OffContent="ç¦ç”¨"
                                                      IsCheckedChanged="OnScriptToggleChanged" />
                                        <Button Background="Transparent" Foreground="#EF4444"
                                                Padding="8,4" CornerRadius="4"
                                                Click="OnDeleteScriptClick"
                                                Tag="{Binding Id}">
                                            <TextBlock Text="ðŸ—‘ï¸" FontSize="14" />
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DockPanel>
        </Border>
        
        <!-- å³ä¾§ï¼šè„šæœ¬ç¼–è¾‘å™¨ -->
        <Border Grid.Column="1" CornerRadius="16" Padding="0" BoxShadow="0 4 16 0 #10000000">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                    <GradientStop Offset="0" Color="#313244" />
                    <GradientStop Offset="1" Color="#353550" />
                </LinearGradientBrush>
            </Border.Background>
            <DockPanel>
                <Border DockPanel.Dock="Top" CornerRadius="16,16,0,0" Padding="22,18">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                            <GradientStop Offset="0" Color="#1E1E2E" />
                            <GradientStop Offset="1" Color="#262640" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="*,Auto">
                        <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12">
                            <Border Background="#8b5cf620" CornerRadius="10" Padding="10">
                                <TextBlock Text="âœï¸" FontSize="18" VerticalAlignment="Center" />
                            </Border>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="è„šæœ¬ç¼–è¾‘å™¨" FontWeight="Bold" Foreground="White" FontSize="16" />
                                <TextBlock x:Name="ScriptFileName" Text="æœªé€‰æ‹©è„šæœ¬" Foreground="#A6ADC8" FontSize="12" Margin="0,2,0,0" />
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                            <Button Padding="16,8" CornerRadius="10" FontWeight="SemiBold"
                                    Click="OnSaveScriptClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#8b5cf6" />
                                        <GradientStop Offset="1" Color="#a855f7" />
                                    </LinearGradientBrush>
                                </Button.Background>
                                <TextBlock Text="ä¿å­˜" Foreground="White" />
                            </Button>
                            <Button Content="å¯¼å‡º" 
                                    Background="#45475A" 
                                    Foreground="White"
                                    Padding="16,8" CornerRadius="10"
                                    Click="OnExportScriptClick" />
                        </StackPanel>
                    </Grid>
                </Border>
                
                <Grid RowDefinitions="Auto,*" Margin="22,16,22,22">
                
                    <!-- è„šæœ¬å…ƒä¿¡æ¯ -->
                    <Border Grid.Row="0" Background="#1E1E2E" CornerRadius="12" Padding="18" Margin="0,0,0,16">
                        <Grid ColumnDefinitions="*,*,*">
                            <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                <TextBlock Text="è„šæœ¬åç§°" Foreground="#A6ADC8" FontSize="12" />
                                <TextBox x:Name="ScriptName" Margin="0,6,0,0" Background="#313244" CornerRadius="8" Padding="12,10" />
                            </StackPanel>
                            <StackPanel Grid.Column="1" Margin="0,0,16,0">
                                <TextBlock Text="é€‚é…æ¸¸æˆ" Foreground="#A6ADC8" FontSize="12" />
                                <TextBox x:Name="ScriptGame" Margin="0,6,0,0" Background="#313244" CornerRadius="8" Padding="12,10" />
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="ç‰ˆæœ¬" Foreground="#A6ADC8" FontSize="12" />
                                <TextBox x:Name="ScriptVersion" Text="1.0.0" Margin="0,6,0,0" Background="#313244" CornerRadius="8" Padding="12,10" />
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- ä»£ç ç¼–è¾‘å™¨ - ä½¿ç”¨ ScrollViewer åŒ…è£¹ -->
                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <TextBox x:Name="CodeEditor"
                                 AcceptsReturn="True"
                                 AcceptsTab="True"
                                 TextWrapping="NoWrap"
                                 FontFamily="Consolas, Monaco, monospace"
                                 FontSize="13"
                                 Background="#1E1E2E"
                                 Foreground="#CDD6F4"
                                 Padding="18"
                                 CornerRadius="12"
                                 MinHeight="400" />
                    </ScrollViewer>
                </Grid>
            </DockPanel>
        </Border>
    </Grid>
</UserControl>
