<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="ChargingPanel.Desktop.Views.Pages.DevicesPage">
    
    <ScrollViewer>
        <StackPanel Spacing="20">
            
            <!-- è™šæ‹Ÿæµ‹è¯•è®¾å¤‡ -->
            <Border Background="#313244" CornerRadius="12" Padding="0">
                <StackPanel>
                    <Border Background="#1E1E2E" CornerRadius="12,12,0,0" Padding="20,16">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <TextBlock Text="ðŸ§ª" FontSize="16" Foreground="#8b5cf6" VerticalAlignment="Center" />
                            <TextBlock Text="è™šæ‹Ÿæµ‹è¯•è®¾å¤‡" FontWeight="SemiBold" Foreground="White" FontSize="15" VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>
                    <StackPanel Margin="20">
                        <TextBlock Text="è™šæ‹Ÿè®¾å¤‡ç”¨äºŽæµ‹è¯•äº‹ä»¶å’Œè„šæœ¬ï¼Œä¸éœ€è¦çœŸå®žè®¾å¤‡å³å¯æ¨¡æ‹ŸæŽ§åˆ¶å“åº”" 
                                   Foreground="#A6ADC8" FontSize="13" Margin="0,0,0,15" />
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <Button Content="âš¡ æ·»åŠ è™šæ‹ŸéƒŠç‹¼" 
                                    Background="#8b5cf6" Foreground="White" 
                                    Padding="20,10"
                                    Click="OnAddVirtualDGLabClick" />
                            <Button Content="ðŸ“± æ·»åŠ è™šæ‹Ÿå½¹æ¬¡å…ƒ" 
                                    Background="#06b6d4" Foreground="White" 
                                    Padding="20,10"
                                    Click="OnAddVirtualYokonexClick" />
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- æ·»åŠ çœŸå®žè®¾å¤‡ -->
            <Border Background="#313244" CornerRadius="16" Padding="0" BoxShadow="0 4 12 0 #20000000">
                <StackPanel>
                    <!-- æ ‡é¢˜åŒºåŸŸ - æ¸å˜èƒŒæ™¯ -->
                    <Border CornerRadius="16,16,0,0" Padding="24,20">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                <GradientStop Offset="0" Color="#1E1E2E" />
                                <GradientStop Offset="1" Color="#262640" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <Grid ColumnDefinitions="Auto,*">
                            <Border Background="#10B98120" CornerRadius="12" Padding="12" Margin="0,0,16,0">
                                <TextBlock Text="ðŸŽ®" FontSize="24" VerticalAlignment="Center" />
                            </Border>
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock Text="æ·»åŠ çœŸå®žè®¾å¤‡" FontWeight="Bold" Foreground="White" FontSize="18" />
                                <TextBlock Text="é€‰æ‹©è®¾å¤‡ç±»åž‹å¹¶é…ç½®è¿žæŽ¥å‚æ•°" Foreground="#A6ADC8" FontSize="12" Margin="0,4,0,0" />
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <StackPanel Margin="24">
                        <!-- è®¾å¤‡ç±»åž‹é€‰æ‹© - å¤§å›¾æ ‡å¡ç‰‡æ ·å¼ -->
                        <Grid ColumnDefinitions="*,*" Margin="0,0,0,24">
                            <!-- DG-LAB éƒŠç‹¼ -->
                            <Button x:Name="TabDGLab" Grid.Column="0"
                                    Padding="0" Height="110" MinWidth="200" Margin="0,0,12,0"
                                    CornerRadius="16"
                                    Click="OnTabDGLabClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                        <GradientStop Offset="0" Color="#1E1E2E" />
                                        <GradientStop Offset="1" Color="#252538" />
                                    </LinearGradientBrush>
                                </Button.Background>
                                <Button.Styles>
                                    <Style Selector="Button">
                                        <Setter Property="BorderBrush" Value="#8b5cf6"/>
                                        <Setter Property="BorderThickness" Value="2"/>
                                    </Style>
                                </Button.Styles>
                                <Grid>
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="10">
                                        <Border Background="#8b5cf620" CornerRadius="16" Width="64" Height="64" HorizontalAlignment="Center" ClipToBounds="True">
                                            <Image Source="avares://éƒŠç‹¼å½¹æ¬¡å…ƒæ¸¸æˆé€‚é…é¢æ¿/Assets/Icons/dglab.png" 
                                                   Width="56" Height="56"
                                                   Stretch="Uniform"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                        <TextBlock Text="DG-LAB (éƒŠç‹¼)" FontSize="14" FontWeight="Bold" Foreground="#F59E0B" HorizontalAlignment="Center" />
                                    </StackPanel>
                                </Grid>
                            </Button>
                            
                            <!-- å½¹æ¬¡å…ƒ -->
                            <Button x:Name="TabYokonex" Grid.Column="1"
                                    Padding="0" Height="110" MinWidth="200" Margin="12,0,0,0"
                                    CornerRadius="16"
                                    BorderBrush="#45475A" BorderThickness="2"
                                    Click="OnTabYokonexClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                        <GradientStop Offset="0" Color="#1E1E2E" />
                                        <GradientStop Offset="1" Color="#252538" />
                                    </LinearGradientBrush>
                                </Button.Background>
                                <Grid>
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="10">
                                        <Border Background="#06b6d420" CornerRadius="16" Width="64" Height="64" HorizontalAlignment="Center" ClipToBounds="True">
                                            <Image Source="avares://éƒŠç‹¼å½¹æ¬¡å…ƒæ¸¸æˆé€‚é…é¢æ¿/Assets/Icons/yokonex.png" 
                                                   Width="56" Height="56"
                                                   Stretch="Uniform"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                        <TextBlock Text="å½¹æ¬¡å…ƒ" FontSize="14" FontWeight="Bold" Foreground="#06b6d4" HorizontalAlignment="Center" />
                                    </StackPanel>
                                </Grid>
                            </Button>
                        </Grid>
                        
                        <!-- DG-LAB è¡¨å• -->
                        <StackPanel x:Name="FormDGLab" IsVisible="True">
                            <!-- è®¾å¤‡ä¿¡æ¯å¡ç‰‡ - å¢žå¼ºæ ·å¼ -->
                            <Border CornerRadius="12" Padding="20" Margin="0,0,0,24" BoxShadow="0 2 8 0 #108b5cf6">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#1E1E2E" />
                                        <GradientStop Offset="1" Color="#252538" />
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="0%,100%">
                                        <GradientStop Offset="0" Color="#8b5cf6" />
                                        <GradientStop Offset="1" Color="#8b5cf640" />
                                    </LinearGradientBrush>
                                </Border.BorderBrush>
                                <Border.BorderThickness>2,0,0,0</Border.BorderThickness>
                                <Grid ColumnDefinitions="Auto,*">
                                    <Border Background="#8b5cf620" CornerRadius="10" Padding="12" Margin="0,0,16,0">
                                        <TextBlock Text="âš¡" FontSize="28" VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock Text="DG-LAB éƒŠç‹¼è„‰å†²ä¸»æœº 3.0" Foreground="#8b5cf6" FontWeight="Bold" FontSize="15" />
                                        <TextBlock Text="æ”¯æŒå¼ºåº¦æŽ§åˆ¶ (0-200)ã€æ³¢å½¢å‘é€ (HEXæ ¼å¼)ã€æ³¢å½¢é˜Ÿåˆ—æ¸…ç©ºã€APPåé¦ˆæŽ¥æ”¶" 
                                                   Foreground="#A6ADC8" FontSize="12" TextWrapping="Wrap" Margin="0,6,0,0" LineHeight="20" />
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- è¿žæŽ¥æ–¹å¼é€‰æ‹© - åœ†å½¢å›¾æ ‡å¡ç‰‡æ ·å¼ -->
                            <TextBlock Text="é€‰æ‹©è¿žæŽ¥æ–¹å¼" Foreground="#CDD6F4" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,12" />
                            <Grid ColumnDefinitions="*,*" Margin="0,0,0,24">
                                <Button x:Name="BtnDGLabWS" Grid.Column="0"
                                        Padding="0" Height="130" Margin="0,0,12,0"
                                        CornerRadius="16"
                                        BorderBrush="#8b5cf6" BorderThickness="2"
                                        Click="OnDGLabConnModeWSClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                            <GradientStop Offset="0" Color="#1E1E2E" />
                                            <GradientStop Offset="1" Color="#252538" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                                        <Border CornerRadius="50" Width="56" Height="56" HorizontalAlignment="Center">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                                    <GradientStop Offset="0" Color="#8b5cf6" />
                                                    <GradientStop Offset="1" Color="#6d28d9" />
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <TextBlock Text="ðŸŒ" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                        <TextBlock Text="WebSocket ä¸­è½¬" FontSize="14" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" />
                                        <TextBlock Text="é€šè¿‡DG-LAB APPè¿žæŽ¥" FontSize="11" Foreground="#A6ADC8" HorizontalAlignment="Center" />
                                    </StackPanel>
                                </Button>
                                <Button x:Name="BtnDGLabBT" Grid.Column="1"
                                        Padding="0" Height="130" Margin="12,0,0,0"
                                        CornerRadius="16"
                                        BorderBrush="#45475A" BorderThickness="2"
                                        Click="OnDGLabConnModeBTClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                            <GradientStop Offset="0" Color="#1E1E2E" />
                                            <GradientStop Offset="1" Color="#252538" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                                        <Border CornerRadius="50" Width="56" Height="56" HorizontalAlignment="Center">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                                    <GradientStop Offset="0" Color="#10B981" />
                                                    <GradientStop Offset="1" Color="#059669" />
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <TextBlock Text="ðŸ“¡" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                        <TextBlock Text="è“ç‰™ç›´è¿ž" FontSize="14" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" />
                                        <TextBlock Text="ç›´æŽ¥è¿žæŽ¥è®¾å¤‡ (éœ€æµè§ˆå™¨æ”¯æŒ)" FontSize="11" Foreground="#A6ADC8" HorizontalAlignment="Center" />
                                    </StackPanel>
                                </Button>
                            </Grid>
                            
                            <!-- WebSocket è¡¨å•åŒºåŸŸ -->
                            <StackPanel x:Name="DGLabWSForm" IsVisible="True">
                                <!-- è®¾å¤‡åç§° -->
                                <StackPanel Margin="0,0,0,20">
                                    <TextBlock Text="è®¾å¤‡åç§°" Foreground="#CDD6F4" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBox x:Name="DGLabDeviceName" Text="æˆ‘çš„éƒŠç‹¼" 
                                             Background="#1E1E2E" Foreground="White"
                                             BorderBrush="#45475A" CornerRadius="10" Padding="14,12" FontSize="14" />
                                </StackPanel>
                                
                                <!-- æœåŠ¡å™¨é€‰æ‹© -->
                                <StackPanel Margin="0,0,0,20">
                                    <TextBlock Text="æœåŠ¡å™¨" Foreground="#CDD6F4" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <Grid ColumnDefinitions="*,*">
                                        <Button x:Name="BtnOfficialServer" Grid.Column="0"
                                                Background="#1E1E2E" Foreground="White"
                                                Padding="0" Height="56" Margin="0,0,8,0"
                                                CornerRadius="10"
                                                BorderBrush="#10B981" BorderThickness="2"
                                                Click="OnOfficialServerClick">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10">
                                                <Border Background="#10B98120" CornerRadius="6" Padding="6">
                                                    <TextBlock Text="âœ…" FontSize="16" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="å®˜æ–¹æœåŠ¡å™¨" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center" />
                                            </StackPanel>
                                        </Button>
                                        <Button x:Name="BtnCustomServer" Grid.Column="1"
                                                Background="#1E1E2E" Foreground="#A6ADC8"
                                                Padding="0" Height="56" Margin="8,0,0,0"
                                                CornerRadius="10"
                                                BorderBrush="#45475A" BorderThickness="2"
                                                Click="OnCustomServerClick">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10">
                                                <Border Background="#6B728020" CornerRadius="6" Padding="6">
                                                    <TextBlock Text="âš™ï¸" FontSize="16" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="è‡ªå®šä¹‰æœåŠ¡å™¨" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center" />
                                            </StackPanel>
                                        </Button>
                                    </Grid>
                                </StackPanel>
                                
                                <!-- è‡ªå®šä¹‰æœåŠ¡å™¨åœ°å€ (é»˜è®¤éšè—) -->
                                <StackPanel x:Name="CustomServerPanel" IsVisible="False" Margin="0,0,0,20">
                                    <TextBlock Text="è‡ªå®šä¹‰ WebSocket åœ°å€" Foreground="#CDD6F4" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBox x:Name="DGLabWsUrl" Text="" 
                                             Watermark="ws://127.0.0.1:9000"
                                             Background="#1E1E2E" Foreground="White"
                                             BorderBrush="#45475A" CornerRadius="10" Padding="14,12" FontSize="14" />
                                    <Border Background="#F59E0B10" CornerRadius="8" Padding="12" Margin="0,8,0,0">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <TextBlock Text="ðŸ’¡" FontSize="14" />
                                            <TextBlock Text="ç•™ç©ºåˆ™ä½¿ç”¨å®˜æ–¹æœåŠ¡å™¨ wss://ws.dungeon-lab.cn" 
                                                       Foreground="#F59E0B" FontSize="12" VerticalAlignment="Center" />
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                                
                                <!-- è¿žæŽ¥æ­¥éª¤ - å¢žå¼ºæ ·å¼ -->
                                <Border Background="#1E1E2E" CornerRadius="12" Padding="20" Margin="0,0,0,20" BorderBrush="#313244" BorderThickness="1">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,16">
                                            <Border Background="#3B82F620" CornerRadius="8" Padding="8">
                                                <TextBlock Text="ðŸ“–" FontSize="16" />
                                            </Border>
                                            <TextBlock Text="è¿žæŽ¥æ­¥éª¤" Foreground="White" FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                                        </StackPanel>
                                        <StackPanel Spacing="12">
                                            <StackPanel Orientation="Horizontal" Spacing="12">
                                                <Border Background="#8b5cf6" CornerRadius="50" Width="24" Height="24">
                                                    <TextBlock Text="1" Foreground="White" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ·»åŠ è®¾å¤‡" Foreground="#CDD6F4" FontSize="13" VerticalAlignment="Center" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="12">
                                                <Border Background="#8b5cf6" CornerRadius="50" Width="24" Height="24">
                                                    <TextBlock Text="2" Foreground="White" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="åœ¨å¼¹å‡ºçª—å£ä¸­ç”¨éƒŠç‹¼ APP æ‰«æäºŒç»´ç " Foreground="#CDD6F4" FontSize="13" VerticalAlignment="Center" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="12">
                                                <Border Background="#10B981" CornerRadius="50" Width="24" Height="24">
                                                    <TextBlock Text="âœ“" Foreground="White" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="APP ç»‘å®šæˆåŠŸåŽå³å¯æŽ§åˆ¶è®¾å¤‡" Foreground="#10B981" FontSize="13" VerticalAlignment="Center" />
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                
                                <!-- æ·»åŠ æŒ‰é’® - å¢žå¼ºæ ·å¼ -->
                                <Button HorizontalAlignment="Stretch" Height="52" CornerRadius="12" FontWeight="Bold" FontSize="15"
                                        Click="OnAddDGLabWSClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                            <GradientStop Offset="0" Color="#8b5cf6" />
                                            <GradientStop Offset="1" Color="#a855f7" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <TextBlock Text="ðŸ”—" FontSize="18" VerticalAlignment="Center" />
                                        <TextBlock Text="è¿žæŽ¥éƒŠç‹¼ APP" Foreground="White" FontSize="15" FontWeight="Bold" VerticalAlignment="Center" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            
                            <!-- è“ç‰™æ‰«æåŒºåŸŸ -->
                            <StackPanel x:Name="DGLabBTForm" IsVisible="False">
                                <Border Background="#1E1E2E" CornerRadius="12" Padding="20">
                                    <StackPanel Spacing="16">
                                        <Grid ColumnDefinitions="*,Auto">
                                            <StackPanel>
                                                <TextBlock Text="ðŸ”µ è“ç‰™è®¾å¤‡æ‰«æ" Foreground="White" FontWeight="SemiBold" FontSize="14" />
                                                <TextBlock Text="æ‰«æé™„è¿‘çš„ DG-LAB è®¾å¤‡ (47L121000/D-LABå¼€å¤´)" Foreground="#A6ADC8" FontSize="12" Margin="0,4,0,0" />
                                            </StackPanel>
                                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                                <Button x:Name="BtnDiagnoseDGLab" Content="ðŸ”§ è¯Šæ–­" 
                                                        Background="#F59E0B" Foreground="White" 
                                                        Padding="16,8" CornerRadius="8"
                                                        Click="OnDiagnoseBluetoothClick" />
                                                <Button x:Name="BtnScanDGLab" Content="ðŸ” æ‰«æè®¾å¤‡" 
                                                        Background="#3B82F6" Foreground="White" 
                                                        Padding="16,8" CornerRadius="8"
                                                        Click="OnScanDGLabBTClick" />
                                            </StackPanel>
                                        </Grid>
                                        
                                        <!-- é»˜è®¤æç¤ºä¿¡æ¯ -->
                                        <Border Background="#313244" CornerRadius="8" Padding="16" MinHeight="100">
                                            <StackPanel x:Name="DGLabBTDeviceList" HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                                                <TextBlock Text="ðŸ“¡ æš‚æ— æ”¯æŒçš„è®¾å¤‡" 
                                                           Foreground="#F59E0B" FontSize="14" FontWeight="SemiBold"
                                                           HorizontalAlignment="Center" />
                                                <TextBlock x:Name="DGLabBTScanHint" 
                                                           Text="ç‚¹å‡»ã€Œæ‰«æè®¾å¤‡ã€æŒ‰é’®æœç´¢é™„è¿‘çš„è“ç‰™è®¾å¤‡" 
                                                           Foreground="#A6ADC8" FontSize="12"
                                                           HorizontalAlignment="Center" TextWrapping="Wrap" TextAlignment="Center" />
                                            </StackPanel>
                                        </Border>
                                        
                                        <!-- æç¤ºå¡ç‰‡ -->
                                        <Border Background="#F59E0B10" CornerRadius="8" Padding="12">
                                            <StackPanel Orientation="Horizontal" Spacing="10">
                                                <TextBlock Text="ðŸ’¡" FontSize="16" />
                                                <TextBlock Text="è¯·ç¡®ä¿è®¾å¤‡å·²å¼€å¯å¹¶åœ¨è“ç‰™èŒƒå›´å†…ã€‚å¦‚æžœæ‰«æä¸åˆ°è®¾å¤‡ï¼Œè¯·ç‚¹å‡»è¯Šæ–­æŒ‰é’®æ£€æŸ¥è“ç‰™çŠ¶æ€ã€‚" 
                                                           Foreground="#F59E0B" FontSize="12" TextWrapping="Wrap" VerticalAlignment="Center" />
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                        
                        <!-- å½¹æ¬¡å…ƒè¡¨å• -->
                        <StackPanel x:Name="FormYokonex" IsVisible="False">
                            <!-- è®¾å¤‡ä¿¡æ¯å¡ç‰‡ - å¢žå¼ºæ ·å¼ -->
                            <Border CornerRadius="12" Padding="20" Margin="0,0,0,24" BoxShadow="0 2 8 0 #1006b6d4">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#1E1E2E" />
                                        <GradientStop Offset="1" Color="#252538" />
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="0%,100%">
                                        <GradientStop Offset="0" Color="#06b6d4" />
                                        <GradientStop Offset="1" Color="#06b6d440" />
                                    </LinearGradientBrush>
                                </Border.BorderBrush>
                                <Border.BorderThickness>2,0,0,0</Border.BorderThickness>
                                <Grid ColumnDefinitions="Auto,*">
                                    <Border Background="#06b6d420" CornerRadius="10" Padding="12" Margin="0,0,16,0">
                                        <TextBlock Text="ðŸ“±" FontSize="28" VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock Text="å½¹æ¬¡å…ƒæ™ºèƒ½è®¾å¤‡" Foreground="#06b6d4" FontWeight="Bold" FontSize="15" />
                                        <TextBlock Text="æ”¯æŒç”µå‡»å™¨ (276çº§å¼ºåº¦)ã€çŒè‚ å™¨ã€è·³è›‹ã€é£žæœºæ¯ç­‰å¤šç§è®¾å¤‡" 
                                                   Foreground="#A6ADC8" FontSize="12" TextWrapping="Wrap" Margin="0,6,0,0" LineHeight="20" />
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- è¿žæŽ¥æ–¹å¼é€‰æ‹© - åœ†å½¢å›¾æ ‡å¡ç‰‡æ ·å¼ -->
                            <TextBlock Text="é€‰æ‹©è¿žæŽ¥æ–¹å¼" Foreground="#CDD6F4" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,12" />
                            <Grid ColumnDefinitions="*,*" Margin="0,0,0,24">
                                <Button x:Name="BtnYokonexIM" Grid.Column="0"
                                        Padding="0" Height="130" Margin="0,0,12,0"
                                        CornerRadius="16"
                                        BorderBrush="#06b6d4" BorderThickness="2"
                                        Click="OnYokonexConnModeIMClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                            <GradientStop Offset="0" Color="#1E1E2E" />
                                            <GradientStop Offset="1" Color="#252538" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                                        <Border CornerRadius="50" Width="56" Height="56" HorizontalAlignment="Center">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                                    <GradientStop Offset="0" Color="#06b6d4" />
                                                    <GradientStop Offset="1" Color="#0891b2" />
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <TextBlock Text="â˜ï¸" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                        <TextBlock Text="è…¾è®¯ IM è¿œç¨‹" FontSize="14" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" />
                                        <TextBlock Text="é€šè¿‡äº‘ç«¯ä¸­è½¬æŽ§åˆ¶" FontSize="11" Foreground="#A6ADC8" HorizontalAlignment="Center" />
                                    </StackPanel>
                                </Button>
                                <Button x:Name="BtnYokonexBT" Grid.Column="1"
                                        Padding="0" Height="130" Margin="12,0,0,0"
                                        CornerRadius="16"
                                        BorderBrush="#45475A" BorderThickness="2"
                                        Click="OnYokonexConnModeBTClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                            <GradientStop Offset="0" Color="#1E1E2E" />
                                            <GradientStop Offset="1" Color="#252538" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                                        <Border CornerRadius="50" Width="56" Height="56" HorizontalAlignment="Center">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                                    <GradientStop Offset="0" Color="#10B981" />
                                                    <GradientStop Offset="1" Color="#059669" />
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <TextBlock Text="ðŸ“¡" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                        <TextBlock Text="è“ç‰™ç›´è¿ž" FontSize="14" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" />
                                        <TextBlock Text="ç›´æŽ¥è¿žæŽ¥è®¾å¤‡ (å®žéªŒåŠŸèƒ½)" FontSize="11" Foreground="#A6ADC8" HorizontalAlignment="Center" />
                                    </StackPanel>
                                </Button>
                            </Grid>
                            
                            <!-- IM è¡¨å•åŒºåŸŸ -->
                            <StackPanel x:Name="YokonexIMForm" IsVisible="True">
                                <Grid ColumnDefinitions="*,*" Margin="0,0,0,16">
                                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                        <TextBlock Text="è®¾å¤‡åç§°" Foreground="#CDD6F4" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8" />
                                        <TextBox x:Name="YokonexDeviceName" Text="æˆ‘çš„å½¹æ¬¡å…ƒ" 
                                                 Background="#1E1E2E" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="10" Padding="14,12" FontSize="14" />
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                        <TextBlock Text="ç”¨æˆ· UID" Foreground="#CDD6F4" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8" />
                                        <TextBox x:Name="YokonexUid" Watermark="game_xxx" 
                                                 Background="#1E1E2E" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="10" Padding="14,12" FontSize="14" />
                                    </StackPanel>
                                </Grid>
                                
                                <Grid ColumnDefinitions="*,*" Margin="0,0,0,20">
                                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                        <TextBlock Text="æ¸¸æˆ Token" Foreground="#CDD6F4" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8" />
                                        <TextBox x:Name="YokonexToken" Watermark="ä»Žæ¸¸æˆé“¾æŽ¥èŽ·å–" 
                                                 Background="#1E1E2E" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="10" Padding="14,12" FontSize="14" />
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                        <TextBlock Text="ç›®æ ‡ç”¨æˆ· ID" Foreground="#CDD6F4" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8" />
                                        <TextBox x:Name="YokonexTargetId" Watermark="è®¾å¤‡ç«¯ç”¨æˆ·ID" 
                                                 Background="#1E1E2E" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="10" Padding="14,12" FontSize="14" />
                                    </StackPanel>
                                </Grid>
                                
                                <!-- è¿žæŽ¥æ­¥éª¤ - å¢žå¼ºæ ·å¼ -->
                                <Border Background="#1E1E2E" CornerRadius="12" Padding="20" Margin="0,0,0,20" BorderBrush="#313244" BorderThickness="1">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,16">
                                            <Border Background="#06b6d420" CornerRadius="8" Padding="8">
                                                <TextBlock Text="ðŸ“–" FontSize="16" />
                                            </Border>
                                            <TextBlock Text="è¿žæŽ¥æ­¥éª¤" Foreground="White" FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                                        </StackPanel>
                                        <StackPanel Spacing="12">
                                            <StackPanel Orientation="Horizontal" Spacing="12">
                                                <Border Background="#06b6d4" CornerRadius="50" Width="24" Height="24">
                                                    <TextBlock Text="1" Foreground="White" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="åœ¨å½¹æ¬¡å…ƒ APP ä¸­åˆ›å»ºæ¸¸æˆå¹¶èŽ·å–é…ç½®" Foreground="#CDD6F4" FontSize="13" VerticalAlignment="Center" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="12">
                                                <Border Background="#06b6d4" CornerRadius="50" Width="24" Height="24">
                                                    <TextBlock Text="2" Foreground="White" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="å¡«å†™ UID å’Œ Token (ä»Žæ¸¸æˆå¯åŠ¨é“¾æŽ¥èŽ·å–)" Foreground="#CDD6F4" FontSize="13" VerticalAlignment="Center" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="12">
                                                <Border Background="#06b6d4" CornerRadius="50" Width="24" Height="24">
                                                    <TextBlock Text="3" Foreground="White" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="å¡«å†™ç›®æ ‡ç”¨æˆ· ID (è®¾å¤‡ç«¯)" Foreground="#CDD6F4" FontSize="13" VerticalAlignment="Center" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="12">
                                                <Border Background="#10B981" CornerRadius="50" Width="24" Height="24">
                                                    <TextBlock Text="âœ“" Foreground="White" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <TextBlock Text="æ·»åŠ è®¾å¤‡åŽï¼Œä½¿ç”¨äº‹ä»¶IDå‘é€æŒ‡ä»¤" Foreground="#10B981" FontSize="13" VerticalAlignment="Center" />
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                
                                <!-- æ·»åŠ æŒ‰é’® - å¢žå¼ºæ ·å¼ -->
                                <Button HorizontalAlignment="Stretch" Height="52" CornerRadius="12" FontWeight="Bold" FontSize="15"
                                        Click="OnAddYokonexIMClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                            <GradientStop Offset="0" Color="#06b6d4" />
                                            <GradientStop Offset="1" Color="#0891b2" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <TextBlock Text="âž•" FontSize="18" VerticalAlignment="Center" />
                                        <TextBlock Text="æ·»åŠ  IM è®¾å¤‡" Foreground="White" FontSize="15" FontWeight="Bold" VerticalAlignment="Center" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            
                            <!-- è“ç‰™æ‰«æåŒºåŸŸ -->
                            <StackPanel x:Name="YokonexBTForm" IsVisible="False">
                                <Border Background="#1E1E2E" CornerRadius="8" Padding="16">
                                    <StackPanel>
                                        <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,16">
                                            <StackPanel>
                                                <TextBlock Text="ðŸ”µ è“ç‰™è®¾å¤‡æ‰«æ" Foreground="White" FontWeight="SemiBold" FontSize="14" />
                                                <TextBlock Text="æ‰«æé™„è¿‘çš„å½¹æ¬¡å…ƒè®¾å¤‡ (ç”µå‡»/çŒè‚ /è·³è›‹/é£žæœºæ¯)" Foreground="#A6ADC8" FontSize="12" Margin="0,4,0,0" />
                                            </StackPanel>
                                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                                <Button Content="ðŸ”§ è¯Šæ–­" 
                                                        Background="#F59E0B" Foreground="White" 
                                                        Padding="16,8" CornerRadius="6"
                                                        Click="OnDiagnoseBluetoothClick" />
                                                <Button x:Name="BtnScanYokonex" Content="ðŸ” æ‰«æè®¾å¤‡" 
                                                        Background="#3B82F6" Foreground="White" 
                                                        Padding="16,8" CornerRadius="6"
                                                        Click="OnScanYokonexBTClick" />
                                            </StackPanel>
                                        </Grid>
                                        
                                        <!-- è®¾å¤‡ç±»åž‹é€‰æ‹© -->
                                        <StackPanel Margin="0,0,0,16">
                                            <TextBlock Text="è®¾å¤‡ç±»åž‹" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                            <ComboBox x:Name="YokonexBTDeviceType" SelectedIndex="0" 
                                                      Background="#313244" Foreground="White"
                                                      HorizontalAlignment="Stretch">
                                                <ComboBoxItem Content="ðŸ”Œ ç”µå‡»å™¨ (Estim)" Tag="Estim" />
                                                <ComboBoxItem Content="ðŸ’‰ çŒè‚ å™¨ (Enema)" Tag="Enema" />
                                                <ComboBoxItem Content="ðŸ’— è·³è›‹ (Vibrator)" Tag="Vibrator" />
                                                <ComboBoxItem Content="ðŸ† é£žæœºæ¯ (Cup)" Tag="Cup" />
                                            </ComboBox>
                                        </StackPanel>
                                        
                                        <!-- æ‰«æç»“æžœåˆ—è¡¨ -->
                                        <Border Background="#313244" CornerRadius="6" Padding="12" MinHeight="80">
                                            <StackPanel x:Name="YokonexBTDeviceList">
                                                <TextBlock x:Name="YokonexBTScanHint" Text="ç‚¹å‡»æ‰«ææŒ‰é’®æœç´¢é™„è¿‘çš„è“ç‰™è®¾å¤‡..." 
                                                           Foreground="#6B7280" FontSize="12" FontStyle="Italic"
                                                           HorizontalAlignment="Center" VerticalAlignment="Center" />
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- å·²æ·»åŠ è®¾å¤‡ -->
            <Border Background="#313244" CornerRadius="12" Padding="0">
                <StackPanel>
                    <Border Background="#1E1E2E" CornerRadius="12,12,0,0" Padding="20,16">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <TextBlock Text="ðŸ“‹" FontSize="16" Foreground="#8b5cf6" VerticalAlignment="Center" />
                            <TextBlock Text="å·²æ·»åŠ è®¾å¤‡" FontWeight="SemiBold" Foreground="White" FontSize="15" VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>
                    <StackPanel x:Name="DeviceListPanel" Margin="20" MinHeight="60">
                        <TextBlock x:Name="NoDevicesHint" Text="æš‚æ— è®¾å¤‡ï¼Œè¯·å…ˆæ·»åŠ è®¾å¤‡" 
                                   Foreground="#6B7280" FontSize="13"
                                   HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </StackPanel>
                </StackPanel>
            </Border>
            
        </StackPanel>
    </ScrollViewer>
    
</UserControl>
