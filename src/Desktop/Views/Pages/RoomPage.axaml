<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="ChargingPanel.Desktop.Views.Pages.RoomPage">
    
    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="0,0,20,20" Spacing="20">
            
            <!-- æˆ¿é—´çŠ¶æ€å¡ç‰‡ -->
            <Border x:Name="RoomStatusCard" Background="#313244" CornerRadius="16" Padding="0" BoxShadow="0 4 12 0 #20000000">
                <StackPanel>
                    <!-- æ ‡é¢˜åŒºåŸŸ -->
                    <Border CornerRadius="16,16,0,0" Padding="24,20">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                <GradientStop Offset="0" Color="#1E1E2E" />
                                <GradientStop Offset="1" Color="#262640" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <Border Background="#3B82F620" CornerRadius="12" Padding="12" Margin="0,0,16,0">
                                <TextBlock Text="ðŸ " FontSize="24" VerticalAlignment="Center" />
                            </Border>
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock x:Name="RoomTitle" Text="å¤šäººæˆ¿é—´" FontWeight="Bold" Foreground="White" FontSize="18" />
                                <TextBlock x:Name="RoomSubtitle" Text="åˆ›å»ºæˆ–åŠ å…¥æˆ¿é—´ä¸Žä»–äººäº’åŠ¨" Foreground="#A6ADC8" FontSize="12" Margin="0,4,0,0" />
                            </StackPanel>
                            <Border x:Name="RoomCodeBadge" Grid.Column="2" Background="#10B981" CornerRadius="8" Padding="20,8" IsVisible="False">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="æˆ¿é—´ç :" Foreground="White" FontSize="12" VerticalAlignment="Center" />
                                    <TextBlock x:Name="RoomCodeText" Text="ABC123" Foreground="White" FontSize="18" FontWeight="Bold" VerticalAlignment="Center" FontFamily="Consolas" />
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                    
                    <!-- æœªåŠ å…¥æˆ¿é—´æ—¶çš„æ“ä½œåŒº -->
                    <StackPanel x:Name="NoRoomPanel" Margin="24" Spacing="20">
                        <!-- åˆ›å»ºæˆ¿é—´ -->
                        <Border Background="#1E1E2E" CornerRadius="12" Padding="20">
                            <StackPanel Spacing="16">
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <Border Background="#10B98120" CornerRadius="8" Padding="8">
                                        <TextBlock Text="âž•" FontSize="16" />
                                    </Border>
                                    <TextBlock Text="åˆ›å»ºæˆ¿é—´" Foreground="White" FontWeight="Bold" FontSize="15" VerticalAlignment="Center" />
                                </StackPanel>
                                
                                <Grid ColumnDefinitions="*,*">
                                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                        <TextBlock Text="æˆ¿é—´åç§°" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                        <TextBox x:Name="CreateRoomName" Text="æˆ‘çš„æˆ¿é—´" 
                                                 Background="#313244" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="8" Padding="12,10" />
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                        <TextBlock Text="å¯†ç  (å¯é€‰)" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                        <TextBox x:Name="CreateRoomPassword" Watermark="ç•™ç©ºåˆ™æ— å¯†ç "
                                                 PasswordChar="â—"
                                                 Background="#313244" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="8" Padding="12,10" />
                                    </StackPanel>
                                </Grid>
                                
                                <Button Content="ðŸš€ åˆ›å»ºæˆ¿é—´" 
                                        HorizontalAlignment="Stretch" Height="48" CornerRadius="10" FontWeight="Bold"
                                        Click="OnCreateRoomClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                            <GradientStop Offset="0" Color="#10B981" />
                                            <GradientStop Offset="1" Color="#059669" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                </Button>
                            </StackPanel>
                        </Border>
                        
                        <!-- åˆ†éš”çº¿ -->
                        <Grid ColumnDefinitions="*,Auto,*">
                            <Border Grid.Column="0" Background="#45475A" Height="1" VerticalAlignment="Center" />
                            <TextBlock Grid.Column="1" Text="æˆ–è€…" Foreground="#6B7280" Margin="16,0" />
                            <Border Grid.Column="2" Background="#45475A" Height="1" VerticalAlignment="Center" />
                        </Grid>
                        
                        <!-- åŠ å…¥æˆ¿é—´ -->
                        <Border Background="#1E1E2E" CornerRadius="12" Padding="20">
                            <StackPanel Spacing="16">
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <Border Background="#3B82F620" CornerRadius="8" Padding="8">
                                        <TextBlock Text="ðŸ”—" FontSize="16" />
                                    </Border>
                                    <TextBlock Text="åŠ å…¥æˆ¿é—´" Foreground="White" FontWeight="Bold" FontSize="15" VerticalAlignment="Center" />
                                </StackPanel>
                                
                                <Grid ColumnDefinitions="*,*">
                                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                        <TextBlock Text="ä¸»æœºåœ°å€" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                        <TextBox x:Name="JoinHostAddress" Watermark="192.168.1.100"
                                                 Background="#313244" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="8" Padding="12,10" />
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                        <TextBlock Text="ç«¯å£ (å¿…å¡«)" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                        <TextBox x:Name="JoinHostPort" Watermark="ä¾‹å¦‚: 12345"
                                                 Background="#313244" Foreground="White"
                                                 BorderBrush="#45475A" CornerRadius="8" Padding="12,10" />
                                    </StackPanel>
                                </Grid>
                                
                                <StackPanel>
                                    <TextBlock Text="å¯†ç  (å¦‚éœ€è¦)" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                    <TextBox x:Name="JoinRoomPassword" Watermark="æ— å¯†ç ç•™ç©º"
                                             PasswordChar="â—"
                                             Background="#313244" Foreground="White"
                                             BorderBrush="#45475A" CornerRadius="8" Padding="12,10" />
                                </StackPanel>
                                
                                <!-- é˜²ç«å¢™æç¤º -->
                                <Border Background="#F59E0B10" CornerRadius="8" Padding="12">
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <TextBlock Text="âš ï¸" FontSize="14" />
                                        <TextBlock Text="å¦‚æžœæ— æ³•è¿žæŽ¥ï¼Œè¯·æ£€æŸ¥ Windows Defender é«˜çº§é˜²ç«å¢™æ˜¯å¦å·²æ”¾è¡Œè¯¥ç«¯å£ï¼Œæˆ–æš‚æ—¶å…³é—­é˜²ç«å¢™è¿›è¡Œæµ‹è¯•ã€‚" 
                                                   Foreground="#F59E0B" FontSize="11" TextWrapping="Wrap" VerticalAlignment="Center" />
                                    </StackPanel>
                                </Border>
                                
                                <Button Content="ðŸ”— åŠ å…¥æˆ¿é—´" 
                                        HorizontalAlignment="Stretch" Height="48" CornerRadius="10" FontWeight="Bold"
                                        Click="OnJoinRoomClick">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                            <GradientStop Offset="0" Color="#3B82F6" />
                                            <GradientStop Offset="1" Color="#2563EB" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                </Button>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- å·²åŠ å…¥æˆ¿é—´æ—¶çš„ä¿¡æ¯åŒº -->
                    <StackPanel x:Name="InRoomPanel" IsVisible="False" Margin="24" Spacing="20">
                        <!-- æˆ¿é—´ä¿¡æ¯ -->
                        <Border Background="#1E1E2E" CornerRadius="12" Padding="20">
                            <Grid ColumnDefinitions="*,Auto">
                                <StackPanel>
                                    <TextBlock x:Name="RoomNameText" Text="æˆ‘çš„æˆ¿é—´" Foreground="White" FontWeight="Bold" FontSize="16" />
                                    <TextBlock x:Name="RoomHostText" Text="ä¸»æœº: 192.168.1.100:12345" Foreground="#A6ADC8" FontSize="12" Margin="0,4,0,0" />
                                </StackPanel>
                                <Button Grid.Column="1" Content="ðŸšª ç¦»å¼€æˆ¿é—´" 
                                        Background="#EF4444" Foreground="White" 
                                        Padding="16,10" CornerRadius="8"
                                        Click="OnLeaveRoomClick" />
                            </Grid>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- æˆå‘˜åˆ—è¡¨ -->
            <Border x:Name="MembersCard" IsVisible="False" Background="#313244" CornerRadius="16" Padding="0" BoxShadow="0 4 12 0 #20000000">
                <StackPanel>
                    <Border CornerRadius="16,16,0,0" Padding="24,20" Background="#1E1E2E">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <TextBlock Text="ðŸ‘¥" FontSize="18" VerticalAlignment="Center" />
                            <TextBlock Text="æˆ¿é—´æˆå‘˜" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                            <Border Background="#8b5cf6" CornerRadius="10" Padding="8,4" Margin="8,0,0,0">
                                <TextBlock x:Name="MemberCountText" Text="0" Foreground="White" FontSize="12" FontWeight="Bold" />
                            </Border>
                        </StackPanel>
                    </Border>
                    
                    <StackPanel x:Name="MembersList" Margin="20" Spacing="10">
                        <!-- æˆå‘˜å¡ç‰‡åŠ¨æ€æ·»åŠ  -->
                        <TextBlock Text="æš‚æ— æˆå‘˜" Foreground="#6B7280" FontStyle="Italic" HorizontalAlignment="Center" />
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- æŽ§åˆ¶é¢æ¿ (ä»…åœ¨æˆ¿é—´ä¸­æ˜¾ç¤º) -->
            <Border x:Name="RemoteControlCard" IsVisible="False" Background="#313244" CornerRadius="16" Padding="0" BoxShadow="0 4 12 0 #20000000">
                <StackPanel>
                    <Border CornerRadius="16,16,0,0" Padding="24,20" Background="#1E1E2E">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <TextBlock Text="ðŸŽ®" FontSize="18" VerticalAlignment="Center" />
                            <TextBlock Text="è¿œç¨‹æŽ§åˆ¶" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>
                    
                    <StackPanel Margin="20" Spacing="16">
                        <!-- ç›®æ ‡é€‰æ‹© -->
                        <StackPanel>
                            <TextBlock Text="é€‰æ‹©æŽ§åˆ¶ç›®æ ‡" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,8" />
                            <ComboBox x:Name="ControlTargetSelector" 
                                      Background="#1E1E2E" Foreground="White" 
                                      HorizontalAlignment="Stretch">
                                <ComboBoxItem Content="-- é€‰æ‹©æˆå‘˜ --" IsSelected="True" />
                            </ComboBox>
                        </StackPanel>
                        
                        <!-- å¼ºåº¦æŽ§åˆ¶ -->
                        <Grid ColumnDefinitions="*,*,Auto">
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="A é€šé“å¼ºåº¦" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                <TextBox x:Name="RemoteStrengthA" Text="50"
                                         Background="#1E1E2E" Foreground="White"
                                         BorderBrush="#45475A" CornerRadius="6" Padding="12,8" />
                            </StackPanel>
                            <StackPanel Grid.Column="1" Margin="10,0,10,0">
                                <TextBlock Text="B é€šé“å¼ºåº¦" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                <TextBox x:Name="RemoteStrengthB" Text="50"
                                         Background="#1E1E2E" Foreground="White"
                                         BorderBrush="#45475A" CornerRadius="6" Padding="12,8" />
                            </StackPanel>
                            <Button Grid.Column="2" Content="ðŸ“¤ å‘é€" 
                                    Background="#8b5cf6" Foreground="White" 
                                    Padding="20,10" CornerRadius="6" VerticalAlignment="Bottom"
                                    Click="OnSendRemoteControlClick" />
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- PVP å¯¹æˆ˜é¢æ¿ -->
            <Border x:Name="PvpCard" IsVisible="False" Background="#313244" CornerRadius="16" Padding="0" BoxShadow="0 4 12 0 #20000000">
                <StackPanel>
                    <Border CornerRadius="16,16,0,0" Padding="24,20">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                <GradientStop Offset="0" Color="#1E1E2E" />
                                <GradientStop Offset="1" Color="#3E1E2E" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <TextBlock Text="âš”ï¸" FontSize="18" VerticalAlignment="Center" />
                            <TextBlock Text="PVP å¯¹æˆ˜æ¨¡å¼" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                            <Border x:Name="PvpStatusBadge" Background="#6B7280" CornerRadius="10" Padding="10,4" Margin="8,0,0,0">
                                <TextBlock x:Name="PvpStatusText" Text="æœªå¼€å§‹" Foreground="White" FontSize="11" />
                            </Border>
                        </StackPanel>
                    </Border>
                    
                    <StackPanel Margin="20" Spacing="16">
                        <!-- PVP è¯´æ˜Ž -->
                        <Border Background="#EF444410" CornerRadius="8" Padding="16">
                            <StackPanel Spacing="8">
                                <TextBlock Text="âš¡ å¯¹æˆ˜è§„åˆ™" Foreground="#EF4444" FontWeight="Bold" FontSize="13" />
                                <TextBlock Text="åŒæ–¹çŽ©å®¶åœ¨åŒä¸€æ¸¸æˆä¸­ä½¿ç”¨ç›¸åŒè§„åˆ™è¿›è¡Œå¯¹æˆ˜ã€‚å½“ OCR æ£€æµ‹åˆ°ä¸€æ–¹çŽ©å®¶æ­»äº¡æ—¶ï¼Œè¯¥çŽ©å®¶å°†æŽ¥å—ç”µå‡»æƒ©ç½šï¼" 
                                           Foreground="#A6ADC8" FontSize="12" TextWrapping="Wrap" />
                            </StackPanel>
                        </Border>
                        
                        <!-- å¯¹æ‰‹é€‰æ‹© -->
                        <StackPanel>
                            <TextBlock Text="é€‰æ‹©å¯¹æ‰‹" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,8" />
                            <ComboBox x:Name="PvpOpponentSelector" 
                                      Background="#1E1E2E" Foreground="White" 
                                      HorizontalAlignment="Stretch">
                                <ComboBoxItem Content="-- é€‰æ‹©å¯¹æ‰‹ --" IsSelected="True" />
                            </ComboBox>
                        </StackPanel>
                        
                        <!-- æƒ©ç½šè®¾ç½® -->
                        <Grid ColumnDefinitions="*,*">
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="æƒ©ç½šå¼ºåº¦" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                <TextBox x:Name="PvpPunishStrength" Text="80"
                                         Background="#1E1E2E" Foreground="White"
                                         BorderBrush="#45475A" CornerRadius="6" Padding="12,8" />
                            </StackPanel>
                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="æƒ©ç½šæ—¶é•¿ (ç§’)" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6" />
                                <TextBox x:Name="PvpPunishDuration" Text="3"
                                         Background="#1E1E2E" Foreground="White"
                                         BorderBrush="#45475A" CornerRadius="6" Padding="12,8" />
                            </StackPanel>
                        </Grid>
                        
                        <!-- å¯¹æˆ˜æŽ§åˆ¶æŒ‰é’® -->
                        <Grid ColumnDefinitions="*,*">
                            <Button x:Name="BtnStartPvp" Grid.Column="0" Content="âš”ï¸ å¼€å§‹å¯¹æˆ˜" 
                                    HorizontalAlignment="Stretch" Height="44" CornerRadius="8" FontWeight="Bold" Margin="0,0,8,0"
                                    Click="OnStartPvpClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#EF4444" />
                                        <GradientStop Offset="1" Color="#DC2626" />
                                    </LinearGradientBrush>
                                </Button.Background>
                            </Button>
                            <Button x:Name="BtnStopPvp" Grid.Column="1" Content="ðŸ›‘ ç»“æŸå¯¹æˆ˜" 
                                    Background="#6B7280" Foreground="White"
                                    HorizontalAlignment="Stretch" Height="44" CornerRadius="8" FontWeight="Bold" Margin="8,0,0,0"
                                    IsEnabled="False"
                                    Click="OnStopPvpClick" />
                        </Grid>
                        
                        <!-- å¯¹æˆ˜çŠ¶æ€ -->
                        <Border x:Name="PvpStatusPanel" IsVisible="False" Background="#1E1E2E" CornerRadius="8" Padding="16">
                            <Grid ColumnDefinitions="*,Auto,*">
                                <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ‘¤" FontSize="24" HorizontalAlignment="Center" />
                                    <TextBlock x:Name="PvpPlayer1Name" Text="æˆ‘" Foreground="White" FontWeight="Bold" FontSize="13" HorizontalAlignment="Center" />
                                    <TextBlock x:Name="PvpPlayer1Status" Text="ç­‰å¾…ä¸­" Foreground="#10B981" FontSize="11" HorizontalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Grid.Column="1" Text="VS" Foreground="#EF4444" FontWeight="Bold" FontSize="20" VerticalAlignment="Center" Margin="20,0" />
                                <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ‘¤" FontSize="24" HorizontalAlignment="Center" />
                                    <TextBlock x:Name="PvpPlayer2Name" Text="å¯¹æ‰‹" Foreground="White" FontWeight="Bold" FontSize="13" HorizontalAlignment="Center" />
                                    <TextBlock x:Name="PvpPlayer2Status" Text="ç­‰å¾…ä¸­" Foreground="#10B981" FontSize="11" HorizontalAlignment="Center" />
                                </StackPanel>
                            </Grid>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- æƒé™ç®¡ç†é¢æ¿ -->
            <Border x:Name="PermissionCard" IsVisible="False" Background="#313244" CornerRadius="16" Padding="0" BoxShadow="0 4 12 0 #20000000">
                <StackPanel>
                    <Border CornerRadius="16,16,0,0" Padding="24,20">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                <GradientStop Offset="0" Color="#1E1E2E" />
                                <GradientStop Offset="1" Color="#2E1E3E" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <TextBlock Text="ðŸ”" FontSize="18" VerticalAlignment="Center" />
                            <TextBlock Text="æƒé™ç®¡ç†" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>
                    
                    <StackPanel Margin="20" Spacing="20">
                        <!-- æˆ‘çš„è§’è‰²é€‰æ‹© -->
                        <Border Background="#1E1E2E" CornerRadius="12" Padding="20">
                            <StackPanel Spacing="16">
                                <TextBlock Text="æˆ‘çš„è§’è‰²" Foreground="White" FontWeight="Bold" FontSize="14" />
                                <TextBlock Text="é€‰æ‹©ä½ åœ¨æˆ¿é—´ä¸­çš„è§’è‰²ï¼Œå†³å®šä½ çš„æƒé™å’ŒåŠŸèƒ½" Foreground="#A6ADC8" FontSize="12" />
                                
                                <WrapPanel Margin="0,8,0,0">
                                    <RadioButton x:Name="RoleController" GroupName="MyRole" 
                                                 Content="ðŸŽ® æŽ§åˆ¶è€…" Margin="0,0,20,10"
                                                 Foreground="White" FontSize="13"
                                                 IsChecked="True"
                                                 Click="OnRoleChanged" />
                                    <RadioButton x:Name="RoleControlled" GroupName="MyRole" 
                                                 Content="ðŸŽ¯ è¢«æŽ§è€…" Margin="0,0,20,10"
                                                 Foreground="White" FontSize="13"
                                                 Click="OnRoleChanged" />
                                    <RadioButton x:Name="RoleObserver" GroupName="MyRole" 
                                                 Content="ðŸ‘ è§‚å¯Ÿè€…" Margin="0,0,0,10"
                                                 Foreground="White" FontSize="13"
                                                 Click="OnRoleChanged" />
                                </WrapPanel>
                                
                                <!-- è§’è‰²è¯´æ˜Ž -->
                                <Border x:Name="RoleDescriptionCard" Background="#313244" CornerRadius="8" Padding="16">
                                    <TextBlock x:Name="RoleDescriptionText" 
                                               Text="æŽ§åˆ¶è€…å¯ä»¥å‘è¢«æŽ§è€…å‘é€æŽ§åˆ¶æŒ‡ä»¤ï¼ŒåŒ…æ‹¬è®¾ç½®å¼ºåº¦å’Œå‘é€æ³¢å½¢"
                                               Foreground="#A6ADC8" FontSize="12" TextWrapping="Wrap" />
                                </Border>
                            </StackPanel>
                        </Border>
                        
                        <!-- æŽ§åˆ¶æƒé™è¯·æ±‚/ç®¡ç† -->
                        <Border Background="#1E1E2E" CornerRadius="12" Padding="20">
                            <StackPanel Spacing="16">
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <TextBlock Text="æŽ§åˆ¶æƒé™" Foreground="White" FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                                    <Border x:Name="PermissionStatusBadge" Background="#10B981" CornerRadius="10" Padding="10,4">
                                        <TextBlock x:Name="PermissionStatusText" Text="æŽ§åˆ¶è€…æ¨¡å¼" Foreground="White" FontSize="11" />
                                    </Border>
                                </StackPanel>
                                
                                <!-- æŽ§åˆ¶è€…è§†å›¾: è¯·æ±‚æŽ§åˆ¶æƒé™ -->
                                <StackPanel x:Name="ControllerPermissionPanel" Spacing="12">
                                    <TextBlock Text="é€‰æ‹©è¦è¯·æ±‚æŽ§åˆ¶çš„è¢«æŽ§è€…" Foreground="#A6ADC8" FontSize="12" />
                                    <Grid ColumnDefinitions="*,Auto">
                                        <ComboBox x:Name="ControlTargetForPermission" 
                                                  Background="#313244" Foreground="White" 
                                                  HorizontalAlignment="Stretch">
                                            <ComboBoxItem Content="-- é€‰æ‹©è¢«æŽ§è€… --" IsSelected="True" />
                                        </ComboBox>
                                        <Button Grid.Column="1" Content="ðŸ”— è¯·æ±‚æŽ§åˆ¶æƒ" 
                                                Background="#3B82F6" Foreground="White" 
                                                Margin="10,0,0,0" Padding="16,10" CornerRadius="8"
                                                Click="OnRequestPermissionClick" />
                                    </Grid>
                                    
                                    <!-- å·²èŽ·å¾—æŽ§åˆ¶æƒçš„ç”¨æˆ·åˆ—è¡¨ -->
                                    <TextBlock Text="å·²æŽˆæƒæŽ§åˆ¶çš„ç”¨æˆ·:" Foreground="#A6ADC8" FontSize="12" Margin="0,8,0,0" />
                                    <StackPanel x:Name="MyControlledUsersList" Spacing="6">
                                        <TextBlock Text="æš‚æ— " Foreground="#6B7280" FontStyle="Italic" FontSize="12" />
                                    </StackPanel>
                                </StackPanel>
                                
                                <!-- è¢«æŽ§è€…è§†å›¾: ç®¡ç†è°å¯ä»¥æŽ§åˆ¶æˆ‘ -->
                                <StackPanel x:Name="ControlledPermissionPanel" IsVisible="False" Spacing="12">
                                    <TextBlock Text="å½“å‰æŽˆæƒç»™ä»¥ä¸‹ç”¨æˆ·æŽ§åˆ¶:" Foreground="#A6ADC8" FontSize="12" />
                                    <StackPanel x:Name="MyControllersList" Spacing="6">
                                        <TextBlock Text="æš‚æ— " Foreground="#6B7280" FontStyle="Italic" FontSize="12" />
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <!-- å¾…å¤„ç†çš„æƒé™è¯·æ±‚ -->
                        <Border x:Name="PendingRequestsCard" IsVisible="False" Background="#1E1E2E" CornerRadius="12" Padding="20">
                            <StackPanel Spacing="12">
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <TextBlock Text="â³" FontSize="16" VerticalAlignment="Center" />
                                    <TextBlock Text="å¾…å¤„ç†çš„æŽ§åˆ¶è¯·æ±‚" Foreground="#FBBF24" FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                                </StackPanel>
                                <StackPanel x:Name="PendingRequestsList" Spacing="8">
                                    <!-- åŠ¨æ€æ·»åŠ è¯·æ±‚å¡ç‰‡ -->
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Border>
            
        </StackPanel>
    </ScrollViewer>
    
</UserControl>
