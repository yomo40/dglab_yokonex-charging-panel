<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="ChargingPanel.Desktop.Views.Pages.PluginsPage">
    
    <Grid ColumnDefinitions="300,*">
        <!-- 左侧：脚本列表 -->
        <Border Grid.Column="0" CornerRadius="16" Padding="0" Margin="0,0,16,0" BoxShadow="0 4 16 0 #10000000">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                    <GradientStop Offset="0" Color="#1F2B3E" />
                    <GradientStop Offset="1" Color="#24324A" />
                </LinearGradientBrush>
            </Border.Background>
            <DockPanel>
                <Border DockPanel.Dock="Top" CornerRadius="16,16,0,0" Padding="22,18">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                            <GradientStop Offset="0" Color="#172033" />
                            <GradientStop Offset="1" Color="#1C2840" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,14">
                            <Border Background="#10B98120" CornerRadius="10" Padding="10">
                            </Border>
                            <TextBlock Text="游戏适配脚本" FontWeight="Bold" Foreground="White" FontSize="16" VerticalAlignment="Center" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Button Padding="14,8" CornerRadius="10" FontWeight="SemiBold"
                                    Click="OnNewScriptClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#10B981" />
                                        <GradientStop Offset="1" Color="#34d399" />
                                    </LinearGradientBrush>
                                </Button.Background>
                                <TextBlock Text="+ 新建" Foreground="White" />
                            </Button>
                            <Button Padding="14,8" CornerRadius="10" FontWeight="SemiBold"
                                    Click="OnImportScriptClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#0284C7" />
                                        <GradientStop Offset="1" Color="#818cf8" />
                                    </LinearGradientBrush>
                                </Button.Background>
                                <TextBlock Text="导入" Foreground="White" />
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <ListBox x:Name="ScriptList" 
                         Background="Transparent"
                         Margin="12"
                         SelectionChanged="OnScriptSelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#3C3C3C" CornerRadius="6" Padding="12" Margin="0,4">
                                <Grid ColumnDefinitions="*,Auto">
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Name}" Foreground="White" FontWeight="SemiBold" FontSize="13" />
                                        <TextBlock Text="{Binding Game}" Foreground="#888" FontSize="11" Margin="0,4,0,0" />
                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                            <TextBlock Text="版本: " FontSize="11" Foreground="#666"/>
                                            <TextBlock Text="{Binding Version}" FontSize="11" Foreground="#0EA5E9"/>
                                        </StackPanel>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Spacing="8">
                                        <ToggleSwitch IsChecked="{Binding Enabled}" 
                                                      OnContent="启用" OffContent="禁用"
                                                      IsCheckedChanged="OnScriptToggleChanged" />
                                        <Button Background="Transparent" Foreground="#EF4444"
                                                Padding="8,4" CornerRadius="4"
                                                Click="OnDeleteScriptClick"
                                                Tag="{Binding Id}">
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DockPanel>
        </Border>
        
        <!-- 右侧：脚本编辑器 -->
        <Border Grid.Column="1" CornerRadius="16" Padding="0" BoxShadow="0 4 16 0 #10000000">
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                    <GradientStop Offset="0" Color="#1F2B3E" />
                    <GradientStop Offset="1" Color="#24324A" />
                </LinearGradientBrush>
            </Border.Background>
            <DockPanel>
                <Border DockPanel.Dock="Top" CornerRadius="16,16,0,0" Padding="22,18">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                            <GradientStop Offset="0" Color="#172033" />
                            <GradientStop Offset="1" Color="#1C2840" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="*,Auto">
                        <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12">
                            <Border Background="#0EA5E920" CornerRadius="10" Padding="10">
                            </Border>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="脚本编辑器" FontWeight="Bold" Foreground="White" FontSize="16" />
                                <TextBlock x:Name="ScriptFileName" Text="未选择脚本" Foreground="#9AB0C8" FontSize="12" Margin="0,2,0,0" />
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                            <Button Padding="16,8" CornerRadius="10" FontWeight="SemiBold"
                                    Click="OnSaveScriptClick">
                                <Button.Background>
                                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,0%">
                                        <GradientStop Offset="0" Color="#0EA5E9" />
                                        <GradientStop Offset="1" Color="#22D3EE" />
                                    </LinearGradientBrush>
                                </Button.Background>
                                <TextBlock Text="保存" Foreground="White" />
                            </Button>
                            <Button Content="导出" 
                                    Background="#314764" 
                                    Foreground="White"
                                    Padding="16,8" CornerRadius="10"
                                    Click="OnExportScriptClick" />
                        </StackPanel>
                    </Grid>
                </Border>
                
                <Grid RowDefinitions="Auto,*" Margin="22,16,22,22">
                
                    <!-- 脚本元信息 -->
                    <Border Grid.Row="0" Background="#172033" CornerRadius="12" Padding="18" Margin="0,0,0,16">
                        <Grid ColumnDefinitions="*,*,*">
                            <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                <TextBlock Text="脚本名称" Foreground="#9AB0C8" FontSize="12" />
                                <TextBox x:Name="ScriptName" Margin="0,6,0,0" Background="#1F2B3E" CornerRadius="8" Padding="12,10" />
                            </StackPanel>
                            <StackPanel Grid.Column="1" Margin="0,0,16,0">
                                <TextBlock Text="适配游戏" Foreground="#9AB0C8" FontSize="12" />
                                <TextBox x:Name="ScriptGame" Margin="0,6,0,0" Background="#1F2B3E" CornerRadius="8" Padding="12,10" />
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="版本" Foreground="#9AB0C8" FontSize="12" />
                                <TextBox x:Name="ScriptVersion" Text="1.0.0" Margin="0,6,0,0" Background="#1F2B3E" CornerRadius="8" Padding="12,10" />
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- 代码编辑器 - 使用 ScrollViewer 包裹 -->
                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <TextBox x:Name="CodeEditor"
                                 AcceptsReturn="True"
                                 AcceptsTab="True"
                                 TextWrapping="NoWrap"
                                 FontFamily="Consolas, Monaco, monospace"
                                 FontSize="13"
                                 Background="#172033"
                                 Foreground="#E6EDF7"
                                 Padding="18"
                                 CornerRadius="12"
                                 MinHeight="400" />
                    </ScrollViewer>
                </Grid>
            </DockPanel>
        </Border>
    </Grid>
</UserControl>




